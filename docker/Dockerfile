FROM apache/airflow:2.7.2-python3.10

USER root

# ğŸ§± í•„ìˆ˜ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    ffmpeg \
    libglib2.0-0 \
    libsm6 \
    libxext6 \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# ğŸ—ï¸ ì‘ì—… ë””ë ‰í† ë¦¬
WORKDIR /opt/airflow

# ğŸ§¾ requirements.txt ë³µì‚¬ ë° ì„¤ì¹˜
COPY requirements.txt .

# ğŸ§© Airflow ì „ìš©: ì¶”ê°€ì ìœ¼ë¡œ í™˜ê²½ë³€ìˆ˜ê°€ í•„ìš”í•˜ë©´ docker-composeì—ì„œ ì„¤ì •

USER airflow

RUN pip install --no-cache-dir --upgrade pip \
    && pip install --no-cache-dir -r requirements.txt